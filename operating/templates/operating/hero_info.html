{% load custom i18n %}
{% trans "Hero Info" as t_hero_info %}
{% trans "Hero ID" as t_hero_id %}
{% trans "Exp." as t_exp %}
{% trans "Emblem" as t_emblem %}
{% trans "ID" as t_id %}
{% trans "Skill" as t_skill %}
{% trans "Equiped" as t_equiped %}
{% trans "Item Pos" as t_item_pos %}
{% trans "Level" as t_level %}
{% trans "Grow Up" as t_grow_up %}
{% trans "Current Exp." as t_current_exp %}
{% trans "Base ID" as t_base_id %}
{% trans "Wake Up" as t_wake_up %}
<ul class="list-group">
  <li class="list-group-item"><h4><b>{{ t_hero_info }}</b></h4></li>
  {% for k in player.hero_info|dictsort:"hero_id" %}
    {% with equiped_info=player.package_data.hero_equiped_info|equiped:k.hero_id %}
    <li class="list-group-item">
      <span>{{ t_hero_id }} :{{ k.hero_id }}</span>
      <span>{{ t_level }} :{{ k.level }}</span>
      <span>{{ t_exp }} :{{ k.exp }}</span>
      <span>{{ t_grow_up }} :{{ k.growup }}</span>
      {% with k.emblem_info|first as f %}
      <span>{{ t_emblem }}
        [<span>{{ t_id }} :{{ f.emblem_id }}</span>
        <span>{{ t_level }} :{{ f.emblem_lv }}</span>
        <span>{{ t_exp }} :{{ f.emblem_exp }}</span>]</span>
      {% endwith %}
      {% with k.emblem_info|last as f %}
      <span>{{ t_emblem }}
        [<span>{{ t_id }} :{{ f.emblem_id }}</span>
        <span>{{ t_level }} :{{ f.emblem_lv }}</span>
        <span>{{ t_exp }} :{{ f.emblem_exp }}</span>]</span>
      {% endwith %}
      <span class="pull-right">
        <span>{{ t_skill }} [ {{ k.skill|length }} ] </span>
        <button class="btn-xs btn btn-info" type="button" onclick="javascript:hero_show_hide_table('#equiped-{{k.hero_id}}')">{{ t_equiped }} <span class="badge">{{ equiped_info|length }}</span></button>
      </span>
    </li>
    {% if equiped_info|length > 0 %}
    <table class="table equiped" id="equiped-{{k.hero_id}}" style="display: none">
      <tbody>
      {% for v in equiped_info %}
        <tr {% cycle 'class="info"' '' %}>
          <td>{{ t_item_pos }} :{{ v.item_pos }}</td>
          <td>{{ t_level }} :{{ v.level }}</td>
          <td>{{ t_grow_up }} :{{ v.growup }}</td>
          <td>{{ t_current_exp }} :{{ v.cur_exp }}</td>
          <td>{{ t_base_id }} :{{ v.base_id }}</td>
          <td>{{ t_wake_up }} :{{ v.wakeup }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
    {% endif %}
    {% endwith %}
  {% endfor %}
</ul>
<script type="text/javascript">
function hero_show_hide_table(k) {
  if($(k).is(":hidden")) {
    $(k).show()
  } else {
    $(k).hide()
  }
}
</script>
